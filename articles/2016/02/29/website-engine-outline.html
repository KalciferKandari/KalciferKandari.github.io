<!DOCTYPE html>

<html>

<!------------>
<!-- Head. -->
<!---------- start -->

<head>

<link rel="stylesheet" type="text/css" href="http://kalciferkandari.github.io/css/articles.css">

<link rel="shortcut icon" type="image/png" href="http://kalciferkandari.github.io/images/favicon_black.png">

<link rel="canonical" href="http://kalciferkandari.github.io/articles/2016/02/29/website-engine-outline.html">

<link rel="alternate" type="application/rss+xml" title="Kalcifer Kandari" href="http://kalciferkandari.github.io/feed.xml">

<script type="text/javascript" src="http://kalciferkandari.github.io/javascript/dynamicScaling.js"></script>

<script type="text/javascript" src="http://kalciferkandari.github.io/javascript/articles.js"></script>

<title>Website Engine: Outline - Kalcifer Kandari</title>

<meta charset="utf-8"/>

</head>

<!------------>
<!-- Head. -->
<!---------- end -->

<body>

<div>

<!------------>
<!-- Header. -->
<!---------- start -->

<header>

<div>

<!------------>
<!-- Logo. -->
<!------------>
<img id="logo" src="/images/kalcifer_kandari_black_650x650.png" alt="Kalcifer Kandari image.">

<p id="name">Kalcifer Kandari</p>

</div>

<!------------>
<!-- Navigation. -->
<!---------- start -->

<nav>

<ul>

<li><a href="http://kalciferkandari.github.io" title="kalciferkandari.github.io">Home</a> |</li>

<li><a href="http://kalciferkandari.github.io/articles" title="kalciferkandari.github.io/articles">Articles</a> |</li>

<li><a href="mailto:kalciferkandari@gmail.com" title="kalciferkandari@gmail.com">Email</a> |</li>

<li><a href="https://github.com/KalciferKandari" title="github.com/KalciferKandari">GitHub</a> |</li>

<li><a href="https://www.behance.net/KalciferKandari" title="behance.net/KalciferKandari">Behance</a> |</li>

<li><a href="http://kalciferkandari.github.io/articles/about" title="kalciferkandari.github.io/articles/about">About</a></li>

</ul>

</nav>

<!------------>
<!-- Navigation. -->
<!---------- end -->

<hr>

</header>

<!------------>
<!-- Header. -->
<!---------- end -->

<!------------>
<!-- Main. -->
<!---------- start -->

<div id="main">

<article class="article">

<h1 id="website-engine-outline">Website Engine: Outline</h1>

<p><em>Written by: Kalcifer Kandari</em><br />
<em>Date: 29 February 2016 23:54:09</em></p>

<h2 id="abstract">Abstract</h2>

<p>Websites are great, most of the time, but there are some aspects to them that are mildly annoying that should not be there. Small things that take a lot of effort to fix. Here is a rough conceptual outline of architecture to fix them.</p>

<h2 id="table-of-contents">Table of Contents</h2>

<p>Use <code class="highlighter-rouge">command + up</code> or <code class="highlighter-rouge">control + up</code> to come back to the table of contents.</p>

<ul id="markdown-toc">
  <li><a href="#introduction" id="markdown-toc-introduction">1. Introduction</a></li>
  <li><a href="#display-engine" id="markdown-toc-display-engine">2. Display Engine</a></li>
  <li><a href="#server-engine" id="markdown-toc-server-engine">3. Server Engine</a></li>
  <li><a href="#data-storage-engine" id="markdown-toc-data-storage-engine">4. Data Storage Engine</a></li>
</ul>

<h2 id="introduction">1. Introduction</h2>

<p>Working on the architecture of a website engine. This is the first rough conceptual outline, consider it draft 1. So far it has several parts, namely:</p>

<ul>
  <li><a href="#display-engine">The display engine</a>, which displays the website in the client’s browser.</li>
  <li><a href="#server-engine">The server engine</a>, which handles requests.</li>
  <li><a href="#data-storage-engine">The data storage engine</a>, which stores and retrieves data in an efficient way.</li>
</ul>

<h2 id="display-engine">2. Display Engine</h2>

<p>A new display engine is necessary because currently websites have subtle problems that are overlooked. These include:</p>

<ul>
  <li>The sending of a lot of redundant information, such as information that is already on the current page, which wastes bandwidth, and time.</li>
  <li>Allowing the building or progressive loading to be seen by the user. This causes problems, such as the user trying to click a link that has loaded, but it being moved once the loading of other content is done, often causing the user to click a different link.</li>
  <li>The webpage displaying stale information.</li>
</ul>

<p>To fix these problems pages are not stored contiguously, each part of content is stored separately so any part can use any other part. Everything has an identifier (ID), every part of a page, and every collection of IDs references parts, such as pages. Parts of pages are stored separately, and the main types of parts that make up pages are as follows:</p>

<ul>
  <li><strong>Dynamic Markdown (DMD), for content.</strong><br />
This is how the structure of any content of pages is written, and is stored in a similar way. Instead of using extraneous HTML, content is stored without it separately. This allows layout to be applied to content later as DLSs. Content references the DSS, DE, and DLS it uses.</li>
  <li><strong>Dynamic Style Sheets (DSS), for style.</strong><br />
DSS is somewhat like Cascading Style Sheets (CSS), except it can directly reference functionality of DJS.</li>
  <li><strong>Display JavaScript (DJS), for dynamic display.</strong><br />
This is used specifically with DSS and with it effectively forms more powerful CSS that can change at runtime.</li>
  <li><strong>Dynamic Events (DE), for actions.</strong><br />
This is JavaScript that defines what something does when used. How these events are incorporated with other events on the page is to be decided.</li>
  <li><strong>Dynamic Layout Sheets (DLS), for layout.</strong><br />
DLS determines how content is laid out on the page, effectively converting it into HTML.</li>
</ul>

<p>The purpose of the display engine is to determine how content is to be presented and controlled by the user.</p>

<p>The display engine is made up of the following:</p>

<ul>
  <li><strong>Loader.</strong><br />
The loader controls, using DJS that is associated a particular structure element, how to load and unload the page, including individual parts, and what order to do so.</li>
  <li><strong>Cacher.</strong><br />
Caches things, such as information that is frequently being used, but not necessarily all the time.</li>
  <li><strong>DSS parser.</strong><br />
This converts DSS to CSS</li>
  <li><strong>DJS parser.</strong><br />
Incorporates DJS into the main JavaScript.</li>
  <li><strong>DE parser.</strong><br />
Incorporates DE into the main JavaScript.</li>
  <li><strong>DMD and DLS/Content parser.</strong><br />
This converts content as DMD to HTML using DLS.</li>
  <li><strong>Communicator.</strong><br />
The communicator handles connections with the server, and what ever else is connected to the page, which could be a WebRTC connection to a peer. Communication is always done with events, which are effectively commands, using socket.io for TCP connections, and WebRTC for UDP connections, including with the server.</li>
</ul>

<h2 id="server-engine">3. Server Engine</h2>

<p>The server engine handles requests from the client engine, for example:</p>

<ul>
  <li>Data requests, which are forwarded to the data storage engine, which may be on the same machine or another server, consolidates the returned data to be sent to the client.</li>
  <li>Application requests, where the server engine processes some information.</li>
  <li>Request routing, where the server workloads are distributed to different servers.</li>
</ul>

<p>Technically there is no distinction between data requests and application requests, as the data storage engine is an application. Everything that is sent across any network is just an event, which is a glorified command. All requests are the same.<br />
The serve engine just manages events, which is also essentially what the display engine does, and they may end-up being the same thing. The thing that distinguishes them is the event handlers.</p>

<p>Node.js is used on the server for effective asynchronous IO, and parity with the client, where it will be possible to have handlers run on both the client and the server.</p>

<h2 id="data-storage-engine">4. Data Storage Engine</h2>

<p>Data storage is essentially used instead of a filesystem so only the information that is required is sent. As such, the parts of webpages are stored separately and indexed.</p>

<p>As nothing is assumed of data storage, other than the storage of data itself, basic properties are required:</p>

<ul>
  <li><strong>Searchability, using indexes.</strong><br />
Entry lookups need to be fast, and as such, have as few reads from disk as possible. This is done with indexes, which are essentially maps of the data that may be spread across different servers, and are usually held in memory. Indexes, being entries themselves, can also be indexed, creating the possibility of index routing to find data in highly distributed, extremely large data sets.</li>
  <li><strong>Consistency, using transactions.</strong><br />
All the data must remain consistent. Such as indexes remaining accurate with respect to the data itself, and the same data in more than one server being synchronised. Changes are not committed the information exists in non-volatile memory in all the locations.</li>
  <li><strong>Segmentability, using sharding.</strong><br />
The database files themselves must be splittable and redistributable across many servers in order to manage workload of those servers without high overhead.</li>
  <li><strong>Redundancy, using duplication and transactions.</strong><br />
In order to have backups, duplication and synchronisation of data is imperative to avoid loss of data. This is done by duplication of data with guaranteed consistency.</li>
  <li><strong>Burden balancing, using data routing.</strong><br />
Different servers may happen to be dealing with data with different demand, those under high workload should not be put under additional stress, and may also have burden relieved by having part of its data moved to a less stressed server.</li>
</ul>

<p>Entries are stored as JSON where each object holds 1 isolated piece of information, and references to associated data. Indexes may only contain references, and of these entries, indexes have domain hierarchies to resolve large ranges of reference quickly. Entries are allocated a server based on how much burden servers are under, where the precise location is known by indexes.<br />
Entries can be an arbitrary length of bytes, and free space is mapped using indexes.</p>

<p>Files part of the larger data storage engine, can only be made longer without reading and then writing the entire file to disk, which is a limitation of filesystems. As much as it would be convenient to have every entry in a separate file, this comes with some expensive overhead, such as additional meta data and indexing of the filesystem by the operating system, and as such there is additional time for the filesystem to find the entry on top of the time it already takes the data storage engine to find it.</p>

<hr />

<p><a href="/articles/2016/03/07/website-engine-the-precursor-outline.html">Next in the series: “Website Engine: The Precursor”</a></p>

</article>


<footer>

<hr />

<p><em>Thanks for reading!</em></p>

<p><em>This article is hosted on <a href="https://github.com/KalciferKandari/KalciferKandari.github.io/tree/master/_posts" title="Articles github.com">GitHub</a>. If there are any problems, open an <a href="https://github.com/KalciferKandari/KalciferKandari.github.io/issues" title="kalciferkandari.github.io Issues github.com">issue</a>.</em></p>

</footer>

</div>

<!------------>
<!-- Main. -->
<!---------- end -->

</div>

</body>

</html>